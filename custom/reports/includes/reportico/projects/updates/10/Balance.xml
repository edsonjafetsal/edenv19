<?xml version="1.0"?>
<Report>
    <ReportQuery>
        <Format>
            <ReportTitle>CashBalance</ReportTitle>
            <ReportDescription></ReportDescription>
            <PageSize>A4</PageSize>
            <PageOrientation>Portrait</PageOrientation>
            <TopMargin></TopMargin>
            <BottomMargin></BottomMargin>
            <RightMargin></RightMargin>
            <LeftMargin></LeftMargin>
            <pdfFont></pdfFont>
            <pdfFontSize></pdfFontSize>
            <PreExecuteCode>if($this-&gt;target_format != 'PDF'){
                $checks = $_criteria[&quot;Hidecolumns&quot;]-&gt;get_criteria_value(&quot;VALUE&quot;,false);

                for ($ct = 0; $ct &lt; count($this-&gt;columns); $ct++)
                {
                $col = $this-&gt;columns[$ct];
                if ( $col-&gt;query_name == &quot;mes&quot; &amp;&amp; preg_match(&quot;/[1]/&quot;, $checks) )
                {
                $col-&gt;attributes[&quot;column_display&quot;] = &quot;hide&quot;;
                }
                if ( $col-&gt;query_name == &quot;ingresoformat&quot; &amp;&amp; preg_match(&quot;/[2]/&quot;, $checks)
                )
                {
                $col-&gt;attributes[&quot;column_display&quot;] = &quot;hide&quot;;
                }
                if ( $col-&gt;query_name == &quot;gastoformat&quot; &amp;&amp; preg_match(&quot;/[3]/&quot;, $checks) )
                {
                $col-&gt;attributes[&quot;column_display&quot;] = &quot;hide&quot;;
                }
                if ( $col-&gt;query_name == &quot;balanceformat&quot; &amp;&amp; preg_match(&quot;/[4]/&quot;, $checks)
                )
                {
                $col-&gt;attributes[&quot;column_display&quot;] = &quot;hide&quot;;
                }
                }
                }
            </PreExecuteCode>
            <formBetweenRows>solidline</formBetweenRows>
            <gridDisplay>show</gridDisplay>
            <gridSortable>yes</gridSortable>
            <gridSearchable>yes</gridSearchable>
            <gridPageable>.DEFAULT</gridPageable>
            <gridPageSize>.DEFAULT</gridPageSize>
        </Format>
        <Datasource>
            <SourceType>database</SourceType>
            <SourceConnection>
                <DatabaseType>mysql</DatabaseType>
                <DatabaseName></DatabaseName>
                <HostName></HostName>
                <ServiceName></ServiceName>
                <UserName></UserName>
                <Password></Password>
            </SourceConnection>
        </Datasource>
        <EntryForm>
            <Query>
                <TableSql>ingresos2 i
                    LEFT JOIN gastos2 g on i.dateint = g.dateint
                </TableSql>
                <WhereSql></WhereSql>
                <GroupSql>GROUP BY dateinti, i.ingreso, i.date, g.gasto, g.date, g.dateint</GroupSql>
                <RowSelection>all</RowSelection>
                <SQL>
                    <QuerySql></QuerySql>
                    <SQLRaw></SQLRaw>
                </SQL>
                <QueryColumns>
                    <QueryColumn>
                        <Name>ingreso</Name>
                        <TableName>i</TableName>
                        <ColumnName>ingreso</ColumnName>
                        <ColumnType>char</ColumnType>
                        <ColumnLength>30</ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Income</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>datei</Name>
                        <TableName></TableName>
                        <ColumnName>date_format(i.date,'%Y-%m') as</ColumnName>
                        <ColumnType>char</ColumnType>
                        <ColumnLength>30</ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title></column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>dateinti</Name>
                        <TableName>i</TableName>
                        <ColumnName>dateint</ColumnName>
                        <ColumnType>char</ColumnType>
                        <ColumnLength>30</ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title></column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>gasto</Name>
                        <TableName>g</TableName>
                        <ColumnName>gasto</ColumnName>
                        <ColumnType>char</ColumnType>
                        <ColumnLength>30</ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Outcome</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>dateg</Name>
                        <TableName></TableName>
                        <ColumnName>date_format(g.date,'%Y-%m') as</ColumnName>
                        <ColumnType>char</ColumnType>
                        <ColumnLength>30</ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title></column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>dateintg</Name>
                        <TableName>g</TableName>
                        <ColumnName>dateint</ColumnName>
                        <ColumnType>char</ColumnType>
                        <ColumnLength>30</ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title></column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>year</Name>
                        <TableName></TableName>
                        <ColumnName>date_format( i.date, '%Y' ) AS</ColumnName>
                        <ColumnType>char</ColumnType>
                        <ColumnLength>30</ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Year</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>MONTH</Name>
                        <TableName></TableName>
                        <ColumnName>date_format( i.date, '%m' ) AS
                        </ColumnName>
                        <ColumnType>char</ColumnType>
                        <ColumnLength>30</ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title></column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>mes</Name>
                        <TableName></TableName>
                        <ColumnName>CASE date_format( i.date, '%m' )
                            WHEN '01'
                            THEN 'January'
                            WHEN '02'
                            THEN 'February'
                            WHEN '03'
                            THEN 'March'
                            WHEN '04'
                            THEN 'April'
                            WHEN '05'
                            THEN 'May'
                            WHEN '06'
                            THEN 'June'
                            WHEN '07'
                            THEN 'July'
                            WHEN '08'
                            THEN 'August'
                            WHEN '09'
                            THEN 'September'
                            WHEN '10'
                            THEN 'October'
                            WHEN '11'
                            THEN 'November'
                            WHEN '12'
                            THEN 'December'
                            ELSE 'Unknown'
                            END AS
                        </ColumnName>
                        <ColumnType>char</ColumnType>
                        <ColumnLength>30</ColumnLength>
                        <Format>
                            <column_display>show</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Month</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>ingresoanyo</Name>
                        <TableName></TableName>
                        <ColumnName></ColumnName>
                        <ColumnType></ColumnType>
                        <ColumnLength></ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Total</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>gastoanyo</Name>
                        <TableName></TableName>
                        <ColumnName></ColumnName>
                        <ColumnType></ColumnType>
                        <ColumnLength></ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Total</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>totalIngreso</Name>
                        <TableName></TableName>
                        <ColumnName></ColumnName>
                        <ColumnType></ColumnType>
                        <ColumnLength></ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Total</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>totalgasto</Name>
                        <TableName></TableName>
                        <ColumnName></ColumnName>
                        <ColumnType></ColumnType>
                        <ColumnLength></ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Total</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>ingresoformat</Name>
                        <TableName></TableName>
                        <ColumnName></ColumnName>
                        <ColumnType></ColumnType>
                        <ColumnLength></ColumnLength>
                        <Format>
                            <column_display>show</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Income</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>gastoformat</Name>
                        <TableName></TableName>
                        <ColumnName></ColumnName>
                        <ColumnType></ColumnType>
                        <ColumnLength></ColumnLength>
                        <Format>
                            <column_display>show</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Outcome</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>balance</Name>
                        <TableName></TableName>
                        <ColumnName></ColumnName>
                        <ColumnType></ColumnType>
                        <ColumnLength></ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title></column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>balanceformat</Name>
                        <TableName></TableName>
                        <ColumnName></ColumnName>
                        <ColumnType></ColumnType>
                        <ColumnLength></ColumnLength>
                        <Format>
                            <column_display>show</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Balance</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>balanceanyo</Name>
                        <TableName></TableName>
                        <ColumnName></ColumnName>
                        <ColumnType></ColumnType>
                        <ColumnLength></ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Total</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>balancetotal</Name>
                        <TableName></TableName>
                        <ColumnName></ColumnName>
                        <ColumnType></ColumnType>
                        <ColumnLength></ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Total</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                </QueryColumns>
                <OrderColumns></OrderColumns>
                <PreSQLS>
                    <PreSQL>
                        <SQLText>CREATE TEMPORARY TABLE ingresos ( ingreso decimal(24,6), date date, dateint int )
                        </SQLText>
                    </PreSQL>
                    <PreSQL>
                        <SQLText>CREATE TEMPORARY TABLE gastos ( gasto decimal(24,6), date date, dateint int )</SQLText>
                    </PreSQL>
                    <PreSQL>
                        <SQLText>INSERT INTO ingresos
                            SELECT sum(pf.amount) as amount_ttc, date_format(p.datep,'%Y-%m-%d') as dm,
                            date_format(p.datep,'%Y%m') as dateint
                            FROM llx_facture as f, llx_paiement_facture as pf, llx_paiement as p
                            WHERE 1 = 1 AND p.rowid = pf.fk_paiement AND pf.fk_facture = f.rowid AND f.entity=1
                            [AND p.datep BETWEEN {Date,RANGE1} AND DATE_ADD({Date,RANGE2}, INTERVAL '1' DAY )]
                            GROUP BY dm, p.datep ORDER BY dm
                        </SQLText>
                    </PreSQL>
                    <PreSQL>
                        <SQLText>INSERT INTO ingresos
                            SELECT sum(p.amount) as amount_ttc, date_format(p.datep,'%Y-%m-%d') as dm,
                            date_format(p.datep,'%Y%m') as dateint
                            FROM llx_bank as b, llx_bank_account as ba, llx_paiement as p
                            LEFT JOIN llx_paiement_facture as pf ON p.rowid = pf.fk_paiement
                            WHERE 1= 1 AND pf.rowid IS NULL AND p.fk_bank = b.rowid AND b.fk_account = ba.rowid AND
                            ba.entity=1
                            [AND p.datep BETWEEN {Date,RANGE1} AND DATE_ADD({Date,RANGE2}, INTERVAL '1' DAY )]
                            GROUP BY dm, p.datep ORDER BY dm
                        </SQLText>
                    </PreSQL>
                    <PreSQL>
                        <SQLText>INSERT INTO gastos
                            SELECT sum(pf.amount) as amount_ttc3, date_format(p.datep,'%Y-%m-%d') as dm ,
                            date_format(p.datep,'%Y%m') as dateint
                            FROM llx_paiementfourn as p, llx_facture_fourn as f, llx_paiementfourn_facturefourn as pf
                            WHERE f.rowid = pf.fk_facturefourn AND p.rowid = pf.fk_paiementfourn AND f.entity=1
                            [AND p.datep BETWEEN {Date,RANGE1} AND DATE_ADD({Date,RANGE2}, INTERVAL '1' DAY )]
                            GROUP BY dm, p.datep ORDER BY dm
                        </SQLText>
                    </PreSQL>
                    <PreSQL>
                        <SQLText>INSERT INTO gastos
                            SELECT sum(t.amount) as amount_ttc4, date_format(t.datev,'%Y-%m-%d') as dm,
                            date_format(t.datev,'%Y%m') as dateint
                            FROM llx_tva as t
                            WHERE amount &gt; 0 AND t.entity=1
                            [AND t.datev BETWEEN {Date,RANGE1} AND {Date,RANGE2}]
                            GROUP BY dm, t.datev ORDER BY dm
                        </SQLText>
                    </PreSQL>
                    <PreSQL>
                        <SQLText>INSERT INTO ingresos
                            SELECT sum(t.amount) as amount_ttc5, date_format(t.datev,'%Y-%m-%d') as dm ,
                            date_format(t.datev,'%Y%m') as dateint
                            FROM llx_tva as t
                            WHERE amount &lt; 0 AND t.entity=1
                            [AND t.datev BETWEEN {Date,RANGE1} AND {Date,RANGE2}]
                            GROUP BY dm, t.datev ORDER BY dm
                        </SQLText>
                    </PreSQL>
                    <PreSQL>
                        <SQLText>INSERT INTO gastos
                            SELECT sum(p.amount) as amount_ttc6 , date_format(p.datep,'%Y-%m-%d') as dm,
                            date_format(p.datep,'%Y%m') as dateint
                            FROM llx_c_chargesociales as c, llx_chargesociales as cs, llx_paiementcharge as p
                            WHERE p.fk_charge = cs.rowid AND cs.fk_type = c.id AND c.deductible = 0 AND cs.entity=1
                            [AND p.datep BETWEEN {Date,RANGE1} AND DATE_ADD({Date,RANGE2}, INTERVAL '1' DAY )]
                            GROUP BY c.libelle, dm, p.datep ORDER BY dm
                        </SQLText>
                    </PreSQL>
                    <PreSQL>
                        <SQLText>INSERT INTO gastos
                            SELECT sum(p.amount) as amount_ttc8 , date_format(p.datep,'%Y-%m-%d') as dm,
                            date_format(p.datep,'%Y%m') as dateint
                            FROM llx_payment_salary as p
                            WHERE p.entity=1
                            [AND p.datep BETWEEN {Date,RANGE1} AND DATE_ADD({Date,RANGE2}, INTERVAL '1' DAY )]
                            GROUP BY p.label, dm, p.datep ORDER BY dm
                        </SQLText>
                    </PreSQL>
                    <PreSQL>
                        <SQLText>INSERT INTO gastos
                            SELECT sum(p.amount) as amount_ttc7 , date_format(p.datep,'%Y-%m-%d') as dm,
                            date_format(p.datep,'%Y%m') as dateint
                            FROM llx_expensereport as e, llx_payment_expensereport as p
                            WHERE e.fk_statut IN (5,6) AND e.entity=1
                            [AND p.datep BETWEEN {Date,RANGE1} AND DATE_ADD({Date,RANGE2}, INTERVAL '1' DAY )]
                            GROUP BY e.ref, dm, p.datep ORDER BY dm
                        </SQLText>
                    </PreSQL>
                    <PreSQL>
                        <SQLText>INSERT INTO gastos
                            SELECT sum(p.amount) as amount_ttc7 , date_format(p.datep,'%Y-%m-%d') as dm,
                            date_format(p.datep,'%Y%m') as dateint
                            FROM llx_c_chargesociales as c, llx_chargesociales as cs, llx_paiementcharge as p
                            WHERE p.fk_charge = cs.rowid AND cs.fk_type = c.id AND c.deductible = 1 AND cs.entity=1
                            [AND p.datep BETWEEN {Date,RANGE1} AND DATE_ADD({Date,RANGE2}, INTERVAL '1' DAY )]
                            GROUP BY c.libelle, dm, p.datep ORDER BY dm
                        </SQLText>
                    </PreSQL>
                    <PreSQL>
                        <SQLText>CREATE TEMPORARY TABLE ingresos2 ( ingreso decimal(24,6), date date, dateint int )
                        </SQLText>
                    </PreSQL>
                    <PreSQL>
                        <SQLText>INSERT INTO ingresos2
                            SELECT sum(ingreso) as ingreso, date_format(date,'%Y-%m-%d') as date,
                            date_format(date,'%Y%m') as dateint
                            FROM ingresos
                            WHERE 1 = 1
                            GROUP BY dateint, ingresos.date
                        </SQLText>
                    </PreSQL>
                    <PreSQL>
                        <SQLText>CREATE TEMPORARY TABLE gastos2 ( gasto decimal(24,6), date date, dateint int )
                        </SQLText>
                    </PreSQL>
                    <PreSQL>
                        <SQLText>INSERT INTO gastos2
                            SELECT sum(gasto) as gasto, date_format(date,'%Y-%m-%d') as date, date_format(date,'%Y%m')
                            as dateint
                            FROM gastos
                            WHERE 1 = 1
                            GROUP BY dateint, gastos.date
                        </SQLText>
                    </PreSQL>
                </PreSQLS>
            </Query>
            <Assignments>
                <Assignment>
                    <AssignName>ingresoanyo</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>sum({ingreso},{year})</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>gastoanyo</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>sum({gasto},{year})</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>totalIngreso</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>sum({ingreso})</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>totalgasto</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>sum({gasto})</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>balance</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>{ingreso}-{gasto}</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>balanceanyo</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>sum({balance},{year})</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>balancetotal</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>sum({balance})</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>totalgasto</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>({totalgasto} != 0?number_format({totalgasto},2):0)</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>totalIngreso</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>({totalIngreso} != 0?number_format({totalIngreso},2):0)</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>ingresoanyo</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>({ingresoanyo} != 0?number_format({ingresoanyo},2):0)</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>gastoanyo</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>({gastoanyo} != 0?number_format({gastoanyo},2):0)</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>gastoformat</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>({gasto} != 0?number_format({gasto},2):0)</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>ingresoformat</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>({ingreso} != 0?number_format({ingreso},2):0)</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>balanceformat</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>({balance} != 0?number_format({balance},2):0)</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>balanceanyo</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>({balanceanyo} != 0?number_format({balanceanyo},2):0)</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>balancetotal</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>({balancetotal} != 0?number_format({balancetotal},2):0)</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>ingreso</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>apply_style('PAGE', 'border-style', 'solid');apply_style('PAGE', 'border-width', '1 1 1
                        1');apply_style('PAGE', 'border-color', '#222222');apply_style('PAGE', 'background-color',
                        '#f3fff3');
                    </Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>ingreso</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>apply_style('ROW', 'background-color', '#e0e0ff');</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>ingreso</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>apply_style('ROW', 'background-color', '#eeeeff')</Expression>
                    <Condition>( lineno() % 2 == 1 )</Condition>
                </Assignment>
                <Assignment>
                    <AssignName>mes</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>{MONTH}.&quot;/&quot;.{mes}</Expression>
                    <Condition></Condition>
                </Assignment>
            </Assignments>
            <Criteria>
                <CriteriaItem>
                    <Name>Date</Name>
                    <Title>Date</Title>
                    <QueryTableName></QueryTableName>
                    <QueryColumnName></QueryColumnName>
                    <CriteriaType>DATERANGE</CriteriaType>
                    <CriteriaDisplay>NOINPUT</CriteriaDisplay>
                    <ExpandDisplay>NOINPUT</ExpandDisplay>
                    <ReturnColumn></ReturnColumn>
                    <DisplayColumn></DisplayColumn>
                    <OverviewColumn></OverviewColumn>
                    <MatchColumn></MatchColumn>
                    <CriteriaDefaults>FIRSTOFMONTH-LASTOFMONTH</CriteriaDefaults>
                    <CriteriaList></CriteriaList>
                    <Query>
                        <TableSql></TableSql>
                        <WhereSql></WhereSql>
                        <GroupSql></GroupSql>
                        <RowSelection></RowSelection>
                        <SQLRaw></SQLRaw>
                        <SQL>
                            <QuerySql></QuerySql>
                        </SQL>
                        <QueryColumns></QueryColumns>
                        <OrderColumns></OrderColumns>
                        <Assignments></Assignments>
                    </Query>
                    <CriteriaLinks></CriteriaLinks>
                </CriteriaItem>
                <CriteriaItem>
                    <Name>Hidecolumns</Name>
                    <Title>HideColumns</Title>
                    <QueryTableName></QueryTableName>
                    <QueryColumnName></QueryColumnName>
                    <CriteriaType>LIST</CriteriaType>
                    <CriteriaDisplay>CHECKBOX</CriteriaDisplay>
                    <ExpandDisplay>NOINPUT</ExpandDisplay>
                    <ReturnColumn></ReturnColumn>
                    <DisplayColumn></DisplayColumn>
                    <OverviewColumn></OverviewColumn>
                    <MatchColumn></MatchColumn>
                    <CriteriaDefaults></CriteriaDefaults>
                    <CriteriaList>Month=1,Income=2,Outcome=3,Balance=4</CriteriaList>
                    <Query>
                        <TableSql></TableSql>
                        <WhereSql></WhereSql>
                        <GroupSql></GroupSql>
                        <RowSelection></RowSelection>
                        <SQLRaw></SQLRaw>
                        <SQL>
                            <QuerySql></QuerySql>
                        </SQL>
                        <QueryColumns></QueryColumns>
                        <OrderColumns></OrderColumns>
                        <Assignments></Assignments>
                    </Query>
                    <CriteriaLinks></CriteriaLinks>
                </CriteriaItem>
            </Criteria>
            <Output>
                <PageHeaders></PageHeaders>
                <PageFooters></PageFooters>
                <DisplayOrders>
                    <DisplayOrder>
                        <ColumnName>mes</ColumnName>
                        <OrderNumber>1</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>ingreso</ColumnName>
                        <OrderNumber>2</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>datei</ColumnName>
                        <OrderNumber>3</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>dateinti</ColumnName>
                        <OrderNumber>4</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>gasto</ColumnName>
                        <OrderNumber>5</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>dateg</ColumnName>
                        <OrderNumber>6</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>dateintg</ColumnName>
                        <OrderNumber>7</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>year</ColumnName>
                        <OrderNumber>8</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>MONTH</ColumnName>
                        <OrderNumber>9</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>ingresoanyo</ColumnName>
                        <OrderNumber>10</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>gastoanyo</ColumnName>
                        <OrderNumber>11</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>totalIngreso</ColumnName>
                        <OrderNumber>12</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>totalgasto</ColumnName>
                        <OrderNumber>13</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>ingresoformat</ColumnName>
                        <OrderNumber>14</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>gastoformat</ColumnName>
                        <OrderNumber>15</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>balance</ColumnName>
                        <OrderNumber>16</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>balanceformat</ColumnName>
                        <OrderNumber>17</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>balanceanyo</ColumnName>
                        <OrderNumber>18</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>balancetotal</ColumnName>
                        <OrderNumber>19</OrderNumber>
                    </DisplayOrder>
                </DisplayOrders>
                <Groups>
                    <Group>
                        <GroupName>REPORT_BODY</GroupName>
                        <BeforeGroupHeader>blankline</BeforeGroupHeader>
                        <AfterGroupHeader>blankline</AfterGroupHeader>
                        <BeforeGroupTrailer>blankline</BeforeGroupTrailer>
                        <AfterGroupTrailer>blankline</AfterGroupTrailer>
                        <GroupHeaders></GroupHeaders>
                        <GroupTrailers>
                            <GroupTrailer>
                                <GroupTrailerDisplayColumn>ingresoformat</GroupTrailerDisplayColumn>
                                <GroupTrailerValueColumn>totalIngreso</GroupTrailerValueColumn>
                                <GroupTrailerCustom></GroupTrailerCustom>
                            </GroupTrailer>
                            <GroupTrailer>
                                <GroupTrailerDisplayColumn>gastoformat</GroupTrailerDisplayColumn>
                                <GroupTrailerValueColumn>totalgasto</GroupTrailerValueColumn>
                                <GroupTrailerCustom></GroupTrailerCustom>
                            </GroupTrailer>
                            <GroupTrailer>
                                <GroupTrailerDisplayColumn>balanceformat</GroupTrailerDisplayColumn>
                                <GroupTrailerValueColumn>balancetotal</GroupTrailerValueColumn>
                                <GroupTrailerCustom></GroupTrailerCustom>
                            </GroupTrailer>
                        </GroupTrailers>
                    </Group>
                    <Group>
                        <GroupName>year</GroupName>
                        <BeforeGroupHeader>blankline</BeforeGroupHeader>
                        <AfterGroupHeader>blankline</AfterGroupHeader>
                        <BeforeGroupTrailer>blankline</BeforeGroupTrailer>
                        <AfterGroupTrailer>blankline</AfterGroupTrailer>
                        <GroupHeaders>
                            <GroupHeader>
                                <GroupHeaderColumn>year</GroupHeaderColumn>
                                <GroupHeaderCustom></GroupHeaderCustom>
                            </GroupHeader>
                        </GroupHeaders>
                        <GroupTrailers>
                            <GroupTrailer>
                                <GroupTrailerDisplayColumn>ingresoformat</GroupTrailerDisplayColumn>
                                <GroupTrailerValueColumn>ingresoanyo</GroupTrailerValueColumn>
                                <GroupTrailerCustom></GroupTrailerCustom>
                            </GroupTrailer>
                            <GroupTrailer>
                                <GroupTrailerDisplayColumn>gastoformat</GroupTrailerDisplayColumn>
                                <GroupTrailerValueColumn>gastoanyo</GroupTrailerValueColumn>
                                <GroupTrailerCustom></GroupTrailerCustom>
                            </GroupTrailer>
                            <GroupTrailer>
                                <GroupTrailerDisplayColumn>balanceformat</GroupTrailerDisplayColumn>
                                <GroupTrailerValueColumn>balanceanyo</GroupTrailerValueColumn>
                                <GroupTrailerCustom></GroupTrailerCustom>
                            </GroupTrailer>
                        </GroupTrailers>
                    </Group>
                </Groups>
                <Graphs>
                    <Graph>
                        <GraphColumn>REPORT_BODY</GraphColumn>
                        <GraphColor>white</GraphColor>
                        <Title></Title>
                        <GraphWidth>.DEFAULT</GraphWidth>
                        <GraphHeight>.DEFAULT</GraphHeight>
                        <GraphWidthPDF>.DEFAULT</GraphWidthPDF>
                        <GraphHeightPDF>.DEFAULT</GraphHeightPDF>
                        <XTitle>Month</XTitle>
                        <YTitle></YTitle>
                        <GridPosition>.DEFAULT</GridPosition>
                        <XGridDisplay>.DEFAULT</XGridDisplay>
                        <XGridColor>.DEFAULT</XGridColor>
                        <YGridDisplay>.DEFAULT</YGridDisplay>
                        <YGridColor>.DEFAULT</YGridColor>
                        <XLabelColumn>mes</XLabelColumn>
                        <TitleFont>.DEFAULT</TitleFont>
                        <TitleFontStyle>.DEFAULT</TitleFontStyle>
                        <TitleFontSize>.DEFAULT</TitleFontSize>
                        <TitleColor>.DEFAULT</TitleColor>
                        <XTitleFont>.DEFAULT</XTitleFont>
                        <XTitleFontStyle>.DEFAULT</XTitleFontStyle>
                        <XTitleFontSize>.DEFAULT</XTitleFontSize>
                        <XTitleColor>.DEFAULT</XTitleColor>
                        <YTitleFont>.DEFAULT</YTitleFont>
                        <YTitleFontStyle>.DEFAULT</YTitleFontStyle>
                        <YTitleFontSize>.DEFAULT</YTitleFontSize>
                        <YTitleColor>.DEFAULT</YTitleColor>
                        <XAxisColor>.DEFAULT</XAxisColor>
                        <XAxisFont>.DEFAULT</XAxisFont>
                        <XAxisFontStyle>.DEFAULT</XAxisFontStyle>
                        <XAxisFontSize>.DEFAULT</XAxisFontSize>
                        <XAxisFontColor>.DEFAULT</XAxisFontColor>
                        <YAxisColor>.DEFAULT</YAxisColor>
                        <YAxisFont>.DEFAULT</YAxisFont>
                        <YAxisFontStyle>.DEFAULT</YAxisFontStyle>
                        <YAxisFontSize>.DEFAULT</YAxisFontSize>
                        <YAxisFontColor>.DEFAULT</YAxisFontColor>
                        <XTickInterval>.DEFAULT</XTickInterval>
                        <YTickInterval>.DEFAULT</YTickInterval>
                        <XTickLabelInterval>.DEFAULT</XTickLabelInterval>
                        <YTickLabelInterval>.DEFAULT</YTickLabelInterval>
                        <MarginColor>.DEFAULT</MarginColor>
                        <MarginLeft>.DEFAULT</MarginLeft>
                        <MarginRight>.DEFAULT</MarginRight>
                        <MarginTop>.DEFAULT</MarginTop>
                        <MarginBottom>.DEFAULT</MarginBottom>
                        <Plots>
                            <Plot>
                                <PlotColumn>balance</PlotColumn>
                                <PlotType>LINE</PlotType>
                                <LineColor>#000000</LineColor>
                                <DataType>number</DataType>
                                <Legend>Balance</Legend>
                                <FillColor>cyan</FillColor>
                            </Plot>
                            <Plot>
                                <PlotColumn>ingresoformat</PlotColumn>
                                <PlotType>BAR</PlotType>
                                <LineColor>#0000ff</LineColor>
                                <DataType>number</DataType>
                                <Legend>Income</Legend>
                                <FillColor></FillColor>
                            </Plot>
                            <Plot>
                                <PlotColumn>gastoformat</PlotColumn>
                                <PlotType>BAR</PlotType>
                                <LineColor>#ff0000</LineColor>
                                <DataType>number</DataType>
                                <Legend>Outcome</Legend>
                                <FillColor></FillColor>
                            </Plot>
                        </Plots>
                    </Graph>
                </Graphs>
            </Output>
        </EntryForm>
    </ReportQuery>
</Report>