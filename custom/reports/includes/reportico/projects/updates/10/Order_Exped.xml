<?xml version="1.0"?><Report><ReportQuery><Format><ReportTitle>UndeliveredProducts</ReportTitle><ReportDescription></ReportDescription><PageSize>.DEFAULT</PageSize><PageOrientation>.DEFAULT</PageOrientation><TopMargin></TopMargin><BottomMargin></BottomMargin><RightMargin></RightMargin><LeftMargin></LeftMargin><pdfFont></pdfFont><pdfFontSize></pdfFontSize><PreExecuteCode>if($this-&gt;target_format != 'PDF'){
$checks = $_criteria[&quot;Hidecolumns&quot;]-&gt;get_criteria_value(&quot;VALUE&quot;,false);

for ($ct = 0; $ct &lt; count($this-&gt;columns); $ct++)
{
    $col = $this-&gt;columns[$ct];
    if ( $col-&gt;query_name == &quot;product_ref&quot; &amp;&amp; preg_match(&quot;/[1]/&quot;, $checks) )
    {
        $col-&gt;attributes[&quot;column_display&quot;] = &quot;hide&quot;;
     }
    if ( $col-&gt;query_name == &quot;label&quot; &amp;&amp; preg_match(&quot;/[2]/&quot;, $checks) )
    {
        $col-&gt;attributes[&quot;column_display&quot;] = &quot;hide&quot;;
     }
    if ( $col-&gt;query_name == &quot;ordered_qty&quot; &amp;&amp; preg_match(&quot;/[3]/&quot;, $checks) )
    {
        $col-&gt;attributes[&quot;column_display&quot;] = &quot;hide&quot;;
     }
    if ( $col-&gt;query_name == &quot;shipped_qty&quot; &amp;&amp; preg_match(&quot;/[4]/&quot;, $checks) )
    {
        $col-&gt;attributes[&quot;column_display&quot;] = &quot;hide&quot;;
     }
    if ( $col-&gt;query_name == &quot;solde&quot; &amp;&amp; preg_match(&quot;/[5]/&quot;, $checks) )
    {
        $col-&gt;attributes[&quot;column_display&quot;] = &quot;hide&quot;;
     }
}
}</PreExecuteCode><formBetweenRows>solidline</formBetweenRows><gridDisplay>show</gridDisplay><gridSortable>yes</gridSortable><gridSearchable>yes</gridSearchable><gridPageable>.DEFAULT</gridPageable><gridPageSize>.DEFAULT</gridPageSize></Format><Datasource><SourceType>database</SourceType><SourceConnection><DatabaseType>mysql</DatabaseType><DatabaseName></DatabaseName><HostName></HostName><ServiceName></ServiceName><UserName></UserName><Password></Password></SourceConnection></Datasource><EntryForm><Query><TableSql></TableSql><WhereSql></WhereSql><GroupSql></GroupSql><RowSelection>all</RowSelection><SQL><QuerySql></QuerySql><SQLRaw>SELECT p.ref product_ref, p.label label, c.ref order_ref, s.nom societe, date_format( c.date_commande, '%d/%m/%y' ) order_date, cd.qty ordered_qty, IFNULL((SELECT sum(ed.qty) FROM llx_expeditiondet ed WHERE ed.fk_origin_line = cd.rowid  ), 0) as shipped_qty, cd.qty - IFNULL((SELECT sum(ed.qty) FROM llx_expeditiondet ed WHERE ed.fk_origin_line = cd.rowid  ), 0) as solde , p.rowid prodid
FROM llx_commandedet cd
JOIN llx_product p ON cd.fk_product = p.rowid
JOIN llx_commande c ON cd.fk_commande = c.rowid 
JOIN llx_societe s ON c.fk_soc = s.rowid 
WHERE 1 = 1 AND c.fk_statut IN (1,2) AND c.entity=1 [AND c.fk_soc IN({Société})]
ORDER BY  s.nom ASC, c.ref ASC</SQLRaw></SQL><QueryColumns><QueryColumn><Name>product_ref</Name><TableName>p</TableName><ColumnName>ref</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF>5cm</ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Reference</column_title><tooltip></tooltip><group_header_label>0</group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label>0</group_trailer_label></Format></QueryColumn><QueryColumn><Name>label</Name><TableName>p</TableName><ColumnName>label</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Label</column_title><tooltip></tooltip><group_header_label>0</group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label>0</group_trailer_label></Format></QueryColumn><QueryColumn><Name>order_ref</Name><TableName>c</TableName><ColumnName>ref</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>hide</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Order</column_title><tooltip></tooltip><group_header_label>0</group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label>0</group_trailer_label></Format></QueryColumn><QueryColumn><Name>societe</Name><TableName>s</TableName><ColumnName>nom</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>hide</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Customer</column_title><tooltip></tooltip><group_header_label>0</group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label>0</group_trailer_label></Format></QueryColumn><QueryColumn><Name>order_date</Name><TableName></TableName><ColumnName>date_format( c.date_commande, '%d/%m/%y' )</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>hide</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Date order</column_title><tooltip></tooltip><group_header_label>0</group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label>0</group_trailer_label></Format></QueryColumn><QueryColumn><Name>ordered_qty</Name><TableName>cd</TableName><ColumnName>qty</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>right</justify><ColumnWidthPDF>3cm</ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>QtyOrdered</column_title><tooltip></tooltip><group_header_label>0</group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label>0</group_trailer_label></Format></QueryColumn><QueryColumn><Name>shipped_qty</Name><TableName></TableName><ColumnName>IFNULL((SELECT sum(ed.qty) FROM llx_expeditiondet ed WHERE ed.fk_origin_line = cd.rowid  ), 0) as</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>right</justify><ColumnWidthPDF>3cm</ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>QtyShipped</column_title><tooltip></tooltip><group_header_label>0</group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label>0</group_trailer_label></Format></QueryColumn><QueryColumn><Name>solde</Name><TableName></TableName><ColumnName>cd.qty - IFNULL((SELECT sum(ed.qty) FROM llx_expeditiondet ed WHERE ed.fk_origin_line = cd.rowid  ), 0) as</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>right</justify><ColumnWidthPDF>3cm</ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Rest</column_title><tooltip></tooltip><group_header_label>0</group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label>0</group_trailer_label></Format></QueryColumn><QueryColumn><Name>prodid</Name><TableName>p</TableName><ColumnName>rowid</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>hide</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title></column_title><tooltip></tooltip><group_header_label>0</group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label>0</group_trailer_label></Format></QueryColumn><QueryColumn><Name>entete_commande</Name><TableName></TableName><ColumnName></ColumnName><ColumnType></ColumnType><ColumnLength></ColumnLength><Format><column_display>hide</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>left</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML></ColumnWidthHTML><column_title>Order</column_title><tooltip></tooltip><group_header_label>0</group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label>0</group_trailer_label></Format></QueryColumn></QueryColumns><OrderColumns></OrderColumns><PreSQLS></PreSQLS></Query><Assignments><Assignment><AssignName>entete_commande</AssignName><AssignNameNew></AssignNameNew><Expression>{order_ref} .&quot;, con fecha  &quot;.{order_date}</Expression><Condition></Condition></Assignment><Assignment><AssignName>ordered_qty</AssignName><AssignNameNew></AssignNameNew><Expression>number_format({ordered_qty},2,'.','')</Expression><Condition></Condition></Assignment><Assignment><AssignName>shipped_qty</AssignName><AssignNameNew></AssignNameNew><Expression>number_format({shipped_qty},2,'.','')</Expression><Condition></Condition></Assignment><Assignment><AssignName>solde</AssignName><AssignNameNew></AssignNameNew><Expression>number_format({solde},2,'.','')</Expression><Condition></Condition></Assignment><Assignment><AssignName>product_ref</AssignName><AssignNameNew></AssignNameNew><Expression>apply_style('PAGE', 'border-style', 'solid');apply_style('PAGE', 'border-width', '1 1 1 1');apply_style('PAGE', 'border-color', '#222222');apply_style('PAGE', 'background-color', '#f3fff3');</Expression><Condition></Condition></Assignment><Assignment><AssignName>product_ref</AssignName><AssignNameNew></AssignNameNew><Expression>apply_style('ROW', 'background-color', '#e0e0ff');</Expression><Condition></Condition></Assignment><Assignment><AssignName>product_ref</AssignName><AssignNameNew></AssignNameNew><Expression> apply_style('ROW', 'background-color', '#eeeeff') </Expression><Condition>( lineno() % 2 == 1 ) </Condition></Assignment><Assignment><AssignName>product_ref</AssignName><AssignNameNew></AssignNameNew><Expression>embed_hyperlink({product_ref}, 'product/card.php?id='.{prodid}.'')</Expression><Condition></Condition></Assignment></Assignments><Criteria><CriteriaItem><Name>Société</Name><Title>Customer</Title><QueryTableName></QueryTableName><QueryColumnName>c.fk_soc</QueryColumnName><CriteriaType>LOOKUP</CriteriaType><CriteriaDisplay>TEXTFIELD</CriteriaDisplay><ExpandDisplay>MULTI</ExpandDisplay><ReturnColumn>rowid</ReturnColumn><DisplayColumn>nom</DisplayColumn><OverviewColumn>nom</OverviewColumn><MatchColumn>nom</MatchColumn><CriteriaDefaults></CriteriaDefaults><CriteriaList></CriteriaList><Query><TableSql></TableSql><WhereSql></WhereSql><GroupSql></GroupSql><RowSelection></RowSelection><SQLRaw>SELECT rowid rowid, nom nom
FROM llx_societe 
WHERE 1 = 1 AND client in (1,2)  AND entity=1
ORDER BY  nom </SQLRaw><SQL><QuerySql></QuerySql></SQL><QueryColumns><QueryColumn><Name>rowid</Name><TableName></TableName><ColumnName>rowid</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><justify>left</justify></Format></QueryColumn><QueryColumn><Name>nom</Name><TableName></TableName><ColumnName>nom</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><justify>left</justify></Format></QueryColumn></QueryColumns><OrderColumns></OrderColumns><Assignments></Assignments></Query><CriteriaLinks></CriteriaLinks></CriteriaItem><CriteriaItem><Name>Hidecolumns</Name><Title>HideColumns</Title><QueryTableName></QueryTableName><QueryColumnName></QueryColumnName><CriteriaType>LIST</CriteriaType><CriteriaDisplay>CHECKBOX</CriteriaDisplay><ExpandDisplay>NOINPUT</ExpandDisplay><ReturnColumn></ReturnColumn><DisplayColumn></DisplayColumn><OverviewColumn></OverviewColumn><MatchColumn></MatchColumn><CriteriaDefaults></CriteriaDefaults><CriteriaList>Reference=1,Label=2,QtyOrdered=3,QtyShipped=4,Rest=5</CriteriaList><Query><TableSql></TableSql><WhereSql></WhereSql><GroupSql></GroupSql><RowSelection></RowSelection><SQLRaw></SQLRaw><SQL><QuerySql></QuerySql></SQL><QueryColumns></QueryColumns><OrderColumns></OrderColumns><Assignments></Assignments></Query><CriteriaLinks></CriteriaLinks></CriteriaItem></Criteria><Output><PageHeaders></PageHeaders><PageFooters></PageFooters><DisplayOrders><DisplayOrder><ColumnName>product_ref</ColumnName><OrderNumber>1</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>label</ColumnName><OrderNumber>2</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>order_ref</ColumnName><OrderNumber>3</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>ordered_qty</ColumnName><OrderNumber>4</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>shipped_qty</ColumnName><OrderNumber>5</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>solde</ColumnName><OrderNumber>6</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>societe</ColumnName><OrderNumber>7</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>order_date</ColumnName><OrderNumber>8</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>entete_commande</ColumnName><OrderNumber>9</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>prodid</ColumnName><OrderNumber>10</OrderNumber></DisplayOrder></DisplayOrders><Groups><Group><GroupName>societe</GroupName><BeforeGroupHeader>blankline</BeforeGroupHeader><AfterGroupHeader>blankline</AfterGroupHeader><BeforeGroupTrailer>blankline</BeforeGroupTrailer><AfterGroupTrailer>blankline</AfterGroupTrailer><GroupHeaders><GroupHeader><GroupHeaderColumn>societe</GroupHeaderColumn><GroupHeaderCustom></GroupHeaderCustom></GroupHeader></GroupHeaders><GroupTrailers></GroupTrailers></Group><Group><GroupName>order_ref</GroupName><BeforeGroupHeader>blankline</BeforeGroupHeader><AfterGroupHeader>blankline</AfterGroupHeader><BeforeGroupTrailer>blankline</BeforeGroupTrailer><AfterGroupTrailer>blankline</AfterGroupTrailer><GroupHeaders><GroupHeader><GroupHeaderColumn>entete_commande</GroupHeaderColumn><GroupHeaderCustom></GroupHeaderCustom></GroupHeader></GroupHeaders><GroupTrailers></GroupTrailers></Group></Groups><Graphs></Graphs></Output></EntryForm></ReportQuery></Report>