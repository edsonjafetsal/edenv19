<?xml version="1.0"?>
<Report>
    <ReportQuery>
        <Format>
            <ReportTitle>MarginBySalesRepresentative</ReportTitle>
            <ReportDescription></ReportDescription>
            <PageSize>A4</PageSize>
            <PageOrientation>Portrait</PageOrientation>
            <TopMargin></TopMargin>
            <BottomMargin></BottomMargin>
            <RightMargin></RightMargin>
            <LeftMargin></LeftMargin>
            <pdfFont></pdfFont>
            <pdfFontSize></pdfFontSize>
            <PreExecuteCode>if($this-&gt;target_format != 'PDF'){
                $checks = $_criteria[&quot;Hidecolumns&quot;]-&gt;get_criteria_value(&quot;VALUE&quot;,false);

                for ($ct = 0; $ct &lt; count($this-&gt;columns); $ct++)
                {
                $col = $this-&gt;columns[$ct];
                if ( $col-&gt;query_name == &quot;ref&quot; &amp;&amp; preg_match(&quot;/[1]/&quot;, $checks) )
                {
                $col-&gt;attributes[&quot;column_display&quot;] = &quot;hide&quot;;
                }
                if ( $col-&gt;query_name == &quot;fecha&quot; &amp;&amp; preg_match(&quot;/[2]/&quot;, $checks) )
                {
                $col-&gt;attributes[&quot;column_display&quot;] = &quot;hide&quot;;
                }
                if ( $col-&gt;query_name == &quot;VentaFormat&quot; &amp;&amp; preg_match(&quot;/[3]/&quot;, $checks) )
                {
                $col-&gt;attributes[&quot;column_display&quot;] = &quot;hide&quot;;
                }
                if ( $col-&gt;query_name == &quot;CompraFormat&quot; &amp;&amp; preg_match(&quot;/[4]/&quot;, $checks) )
                {
                $col-&gt;attributes[&quot;column_display&quot;] = &quot;hide&quot;;
                }
                if ( $col-&gt;query_name == &quot;MargenFormat&quot; &amp;&amp; preg_match(&quot;/[5]/&quot;, $checks) )
                {
                $col-&gt;attributes[&quot;column_display&quot;] = &quot;hide&quot;;
                }
                }
                }
            </PreExecuteCode>
            <formBetweenRows>solidline</formBetweenRows>
            <gridDisplay>show</gridDisplay>
            <gridSortable>yes</gridSortable>
            <gridSearchable>yes</gridSearchable>
            <gridPageable>.DEFAULT</gridPageable>
            <gridPageSize>.DEFAULT</gridPageSize>
        </Format>
        <Datasource>
            <SourceType>database</SourceType>
            <SourceConnection>
                <DatabaseType>mysql</DatabaseType>
                <DatabaseName></DatabaseName>
                <HostName></HostName>
                <ServiceName></ServiceName>
                <UserName></UserName>
                <Password></Password>
            </SourceConnection>
        </Datasource>
        <EntryForm>
            <Query>
                <TableSql>llx_facture as f,
                    llx_facturedet as fd
                    left join
                    llx_product as p ON p.rowid = fd.fk_product,
                    llx_societe as s
                    left join
                    llx_societe_commerciaux as sc ON sc.fk_soc = s.rowid
                    left join
                    llx_user as u ON u.rowid = sc.fk_user
                </TableSql>
                <WhereSql>AND f.entity=1
                    AND f.rowid = fd.fk_facture
                    AND (f.fk_statut &gt;0 AND f.fk_statut &lt;3 OR f.close_code &lt;&gt; 'replaced') AND f.datef
                    BETWEEN {Date,RANGE1} AND {Date,RANGE2}
                    AND s.rowid = f.fk_soc
                </WhereSql>
                <GroupSql>GROUP BY f.rowid , sc.fk_user, fd.fk_facture, f.ref, f.type, f.fk_soc, s.nom, f.datef,
                u.lastname, u.firstname
                </GroupSql>
                <RowSelection>all</RowSelection>
                <SQL>
                    <QuerySql></QuerySql>
                    <SQLRaw></SQLRaw>
                </SQL>
                <QueryColumns>
                    <QueryColumn>
                        <Name>fk_facture</Name>
                        <TableName>fd</TableName>
                        <ColumnName>fk_facture</ColumnName>
                        <ColumnType>char</ColumnType>
                        <ColumnLength>30</ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title></column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>ref</Name>
                        <TableName>f</TableName>
                        <ColumnName>ref</ColumnName>
                        <ColumnType>char</ColumnType>
                        <ColumnLength>30</ColumnLength>
                        <Format>
                            <column_display>show</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Invoice</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>total_ht</Name>
                        <TableName></TableName>
                        <ColumnName>(select sum(fdd.total_ht) from llx_facturedet as fdd where fdd.fk_facture = f.rowid)
                            as
                        </ColumnName>
                        <ColumnType>char</ColumnType>
                        <ColumnLength>30</ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF>3cm</ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Precio Venta</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>buy_price_ht</Name>
                        <TableName></TableName>
                        <ColumnName>if(f.type = 2,
                            (select sum(fdd.buy_price_ht * fdd.qty * - 1) from llx_facturedet as fdd where
                            fdd.fk_facture = f.rowid),
                            (select sum(fdd.buy_price_ht * fdd.qty) from llx_facturedet as fdd where fdd.fk_facture =
                            f.rowid)) as
                        </ColumnName>
                        <ColumnType>char</ColumnType>
                        <ColumnLength>30</ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title></column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>fk_soc</Name>
                        <TableName>f</TableName>
                        <ColumnName>fk_soc</ColumnName>
                        <ColumnType>char</ColumnType>
                        <ColumnLength>30</ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title></column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>nom</Name>
                        <TableName>s</TableName>
                        <ColumnName>nom</ColumnName>
                        <ColumnType>char</ColumnType>
                        <ColumnLength>30</ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Customer</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>margen</Name>
                        <TableName></TableName>
                        <ColumnName>if(f.type = 2,
                            (select sum(total_ht - (buy_price_ht * qty * - 1)) from llx_facturedet as fdd where
                            fdd.fk_facture = f.rowid),
                            (select sum(total_ht - (buy_price_ht * qty)) from llx_facturedet as fdd where fdd.fk_facture
                            = f.rowid)) as
                        </ColumnName>
                        <ColumnType>char</ColumnType>
                        <ColumnLength>30</ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF>3cm</ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Margen</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>fecha</Name>
                        <TableName></TableName>
                        <ColumnName>date_format(f.datef, '%d/%m/%y') as</ColumnName>
                        <ColumnType>char</ColumnType>
                        <ColumnLength>30</ColumnLength>
                        <Format>
                            <column_display>show</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF>3cm</ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Date</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>rowid</Name>
                        <TableName>f</TableName>
                        <ColumnName>rowid</ColumnName>
                        <ColumnType>char</ColumnType>
                        <ColumnLength>30</ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title></column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>fk_user</Name>
                        <TableName>sc</TableName>
                        <ColumnName>fk_user</ColumnName>
                        <ColumnType>char</ColumnType>
                        <ColumnLength>30</ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title></column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>name</Name>
                        <TableName>u</TableName>
                        <ColumnName>lastname</ColumnName>
                        <ColumnType>char</ColumnType>
                        <ColumnLength>30</ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Name</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>firstname</Name>
                        <TableName>u</TableName>
                        <ColumnName>firstname</ColumnName>
                        <ColumnType>char</ColumnType>
                        <ColumnLength>30</ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Name</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>TotalCompra</Name>
                        <TableName></TableName>
                        <ColumnName></ColumnName>
                        <ColumnType></ColumnType>
                        <ColumnLength></ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Total</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>TotalVenta</Name>
                        <TableName></TableName>
                        <ColumnName></ColumnName>
                        <ColumnType></ColumnType>
                        <ColumnLength></ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>right</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Total</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>TotalMargen</Name>
                        <TableName></TableName>
                        <ColumnName></ColumnName>
                        <ColumnType></ColumnType>
                        <ColumnLength></ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>right</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Total</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>VentaFormat</Name>
                        <TableName></TableName>
                        <ColumnName></ColumnName>
                        <ColumnType></ColumnType>
                        <ColumnLength></ColumnLength>
                        <Format>
                            <column_display>show</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>right</justify>
                            <ColumnWidthPDF>3cm</ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>SellingPrice</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>CompraFormat</Name>
                        <TableName></TableName>
                        <ColumnName></ColumnName>
                        <ColumnType></ColumnType>
                        <ColumnLength></ColumnLength>
                        <Format>
                            <column_display>show</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>right</justify>
                            <ColumnWidthPDF>3cm</ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>BuyingPrice</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>MargenFormat</Name>
                        <TableName></TableName>
                        <ColumnName></ColumnName>
                        <ColumnType></ColumnType>
                        <ColumnLength></ColumnLength>
                        <Format>
                            <column_display>show</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>right</justify>
                            <ColumnWidthPDF>3cm</ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Margin</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>TotalTotal</Name>
                        <TableName></TableName>
                        <ColumnName></ColumnName>
                        <ColumnType></ColumnType>
                        <ColumnLength></ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Total</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>TotalCompraComm</Name>
                        <TableName></TableName>
                        <ColumnName></ColumnName>
                        <ColumnType></ColumnType>
                        <ColumnLength></ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Total</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>TotalVentaComm</Name>
                        <TableName></TableName>
                        <ColumnName></ColumnName>
                        <ColumnType></ColumnType>
                        <ColumnLength></ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Total</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                    <QueryColumn>
                        <Name>TotalMargenComm</Name>
                        <TableName></TableName>
                        <ColumnName></ColumnName>
                        <ColumnType></ColumnType>
                        <ColumnLength></ColumnLength>
                        <Format>
                            <column_display>hide</column_display>
                            <content_type>plain</content_type>
                            <ColumnStartPDF></ColumnStartPDF>
                            <justify>left</justify>
                            <ColumnWidthPDF></ColumnWidthPDF>
                            <ColumnWidthHTML></ColumnWidthHTML>
                            <column_title>Total</column_title>
                            <tooltip></tooltip>
                            <group_header_label>0</group_header_label>
                            <group_header_label_xpos></group_header_label_xpos>
                            <group_header_data_xpos></group_header_data_xpos>
                            <group_trailer_label>0</group_trailer_label>
                        </Format>
                    </QueryColumn>
                </QueryColumns>
                <OrderColumns>
                    <OrderColumn>
                        <Name>fk_user</Name>
                        <OrderType>ASC</OrderType>
                    </OrderColumn>
                    <OrderColumn>
                        <Name>fk_soc</Name>
                        <OrderType>ASC</OrderType>
                    </OrderColumn>
                    <OrderColumn>
                        <Name>rowid</Name>
                        <OrderType>ASC</OrderType>
                    </OrderColumn>
                </OrderColumns>
                <PreSQLS></PreSQLS>
            </Query>
            <Assignments>
                <Assignment>
                    <AssignName>TotalCompra</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>sum({buy_price_ht},{fk_soc})</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>TotalVenta</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>sum({total_ht},{fk_soc})</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>TotalMargen</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>sum({margen},{fk_soc})</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>TotalTotal</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>sum({margen})</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>TotalCompraComm</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>sum({buy_price_ht},{fk_user})</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>TotalVentaComm</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>sum({total_ht},{fk_user})</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>TotalMargenComm</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>sum({margen},{fk_user})</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>VentaFormat</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>number_format({total_ht},2,'.','')</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>CompraFormat</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>number_format({buy_price_ht},2,'.','')</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>MargenFormat</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>number_format({margen},2,'.','')</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>TotalCompra</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>number_format({TotalCompra},2,'.','')</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>TotalVenta</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>number_format({TotalVenta},2,'.','')</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>TotalMargen</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>number_format({TotalMargen},2,'.','')</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>TotalTotal</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>number_format({TotalTotal},2,'.','')</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>TotalCompraComm</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>number_format({TotalCompraComm},2,'.','')</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>TotalVentaComm</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>number_format({TotalVentaComm},2,'.','')</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>TotalMargenComm</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>number_format({TotalMargenComm},2,'.','')</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>name</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>({firstname}?{firstname}.&quot; &quot;.{name}:{name})</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>fk_facture</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>apply_style('PAGE', 'border-style', 'solid');apply_style('PAGE', 'border-width', '1 1 1
                        1');apply_style('PAGE', 'border-color', '#222222');apply_style('PAGE', 'background-color',
                        '#f3fff3');
                    </Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>fk_facture</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>apply_style('ROW', 'background-color', '#e0e0ff');</Expression>
                    <Condition></Condition>
                </Assignment>
                <Assignment>
                    <AssignName>fk_facture</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>apply_style('ROW', 'background-color', '#eeeeff')</Expression>
                    <Condition>( lineno() % 2 == 1 )</Condition>
                </Assignment>
                <Assignment>
                    <AssignName>ref</AssignName>
                    <AssignNameNew></AssignNameNew>
                    <Expression>embed_hyperlink({ref}, 'compta/facture.php?facid='.{fk_facture}.'')</Expression>
                    <Condition></Condition>
                </Assignment>
            </Assignments>
            <Criteria>
                <CriteriaItem>
                    <Name>Date</Name>
                    <Title>Interval</Title>
                    <QueryTableName></QueryTableName>
                    <QueryColumnName>f.datef</QueryColumnName>
                    <CriteriaType>DATERANGE</CriteriaType>
                    <CriteriaDisplay>NOINPUT</CriteriaDisplay>
                    <ExpandDisplay>NOINPUT</ExpandDisplay>
                    <ReturnColumn></ReturnColumn>
                    <DisplayColumn></DisplayColumn>
                    <OverviewColumn></OverviewColumn>
                    <MatchColumn></MatchColumn>
                    <CriteriaDefaults>FIRSTOFMONTH-LASTOFMONTH</CriteriaDefaults>
                    <CriteriaList></CriteriaList>
                    <Query>
                        <TableSql></TableSql>
                        <WhereSql></WhereSql>
                        <GroupSql></GroupSql>
                        <RowSelection></RowSelection>
                        <SQLRaw></SQLRaw>
                        <SQL>
                            <QuerySql></QuerySql>
                        </SQL>
                        <QueryColumns></QueryColumns>
                        <OrderColumns></OrderColumns>
                        <Assignments></Assignments>
                    </Query>
                    <CriteriaLinks></CriteriaLinks>
                </CriteriaItem>
                <CriteriaItem>
                    <Name>Product</Name>
                    <Title>Product/Service</Title>
                    <QueryTableName></QueryTableName>
                    <QueryColumnName>fd.fk_product</QueryColumnName>
                    <CriteriaType>LOOKUP</CriteriaType>
                    <CriteriaDisplay>TEXTFIELD</CriteriaDisplay>
                    <ExpandDisplay>MULTI</ExpandDisplay>
                    <ReturnColumn>rowid</ReturnColumn>
                    <DisplayColumn>label</DisplayColumn>
                    <OverviewColumn>label</OverviewColumn>
                    <MatchColumn>label</MatchColumn>
                    <CriteriaDefaults></CriteriaDefaults>
                    <CriteriaList></CriteriaList>
                    <Query>
                        <TableSql></TableSql>
                        <WhereSql></WhereSql>
                        <GroupSql></GroupSql>
                        <RowSelection></RowSelection>
                        <SQLRaw>SELECT label label, rowid rowid
                            FROM llx_product
                            WHERE 1 = 1 AND entity=1
                            ORDER BY label ASC
                        </SQLRaw>
                        <SQL>
                            <QuerySql></QuerySql>
                        </SQL>
                        <QueryColumns>
                            <QueryColumn>
                                <Name>label</Name>
                                <TableName></TableName>
                                <ColumnName>label</ColumnName>
                                <ColumnType>char</ColumnType>
                                <ColumnLength>30</ColumnLength>
                                <Format>
                                    <column_display>show</column_display>
                                    <content_type>plain</content_type>
                                    <justify>left</justify>
                                </Format>
                            </QueryColumn>
                            <QueryColumn>
                                <Name>rowid</Name>
                                <TableName></TableName>
                                <ColumnName>rowid</ColumnName>
                                <ColumnType>char</ColumnType>
                                <ColumnLength>30</ColumnLength>
                                <Format>
                                    <column_display>show</column_display>
                                    <content_type>plain</content_type>
                                    <justify>left</justify>
                                </Format>
                            </QueryColumn>
                        </QueryColumns>
                        <OrderColumns></OrderColumns>
                        <Assignments></Assignments>
                    </Query>
                    <CriteriaLinks></CriteriaLinks>
                </CriteriaItem>
                <CriteriaItem>
                    <Name>Type</Name>
                    <Title>Type</Title>
                    <QueryTableName></QueryTableName>
                    <QueryColumnName>p.fk_product_type</QueryColumnName>
                    <CriteriaType>LIST</CriteriaType>
                    <CriteriaDisplay>CHECKBOX</CriteriaDisplay>
                    <ExpandDisplay>NOINPUT</ExpandDisplay>
                    <ReturnColumn></ReturnColumn>
                    <DisplayColumn></DisplayColumn>
                    <OverviewColumn></OverviewColumn>
                    <MatchColumn></MatchColumn>
                    <CriteriaDefaults></CriteriaDefaults>
                    <CriteriaList>Product=0,Service=1</CriteriaList>
                    <Query>
                        <TableSql></TableSql>
                        <WhereSql></WhereSql>
                        <GroupSql></GroupSql>
                        <RowSelection></RowSelection>
                        <SQLRaw></SQLRaw>
                        <SQL>
                            <QuerySql></QuerySql>
                        </SQL>
                        <QueryColumns></QueryColumns>
                        <OrderColumns></OrderColumns>
                        <Assignments></Assignments>
                    </Query>
                    <CriteriaLinks></CriteriaLinks>
                </CriteriaItem>
                <CriteriaItem>
                    <Name>Customer</Name>
                    <Title>Customer</Title>
                    <QueryTableName></QueryTableName>
                    <QueryColumnName>f.fk_soc</QueryColumnName>
                    <CriteriaType>LOOKUP</CriteriaType>
                    <CriteriaDisplay>TEXTFIELD</CriteriaDisplay>
                    <ExpandDisplay>MULTI</ExpandDisplay>
                    <ReturnColumn>rowid</ReturnColumn>
                    <DisplayColumn>nom</DisplayColumn>
                    <OverviewColumn>nom</OverviewColumn>
                    <MatchColumn>nom</MatchColumn>
                    <CriteriaDefaults></CriteriaDefaults>
                    <CriteriaList></CriteriaList>
                    <Query>
                        <TableSql></TableSql>
                        <WhereSql></WhereSql>
                        <GroupSql></GroupSql>
                        <RowSelection></RowSelection>
                        <SQLRaw>SELECT nom nom, rowid rowid
                            FROM llx_societe
                            WHERE 1 = 1 AND client=1 AND entity=1
                            ORDER BY nom ASC
                        </SQLRaw>
                        <SQL>
                            <QuerySql></QuerySql>
                        </SQL>
                        <QueryColumns>
                            <QueryColumn>
                                <Name>nom</Name>
                                <TableName></TableName>
                                <ColumnName>nom</ColumnName>
                                <ColumnType>char</ColumnType>
                                <ColumnLength>30</ColumnLength>
                                <Format>
                                    <column_display>show</column_display>
                                    <content_type>plain</content_type>
                                    <justify>left</justify>
                                </Format>
                            </QueryColumn>
                            <QueryColumn>
                                <Name>rowid</Name>
                                <TableName></TableName>
                                <ColumnName>rowid</ColumnName>
                                <ColumnType>char</ColumnType>
                                <ColumnLength>30</ColumnLength>
                                <Format>
                                    <column_display>show</column_display>
                                    <content_type>plain</content_type>
                                    <justify>left</justify>
                                </Format>
                            </QueryColumn>
                        </QueryColumns>
                        <OrderColumns></OrderColumns>
                        <Assignments></Assignments>
                    </Query>
                    <CriteriaLinks></CriteriaLinks>
                </CriteriaItem>
                <CriteriaItem>
                    <Name>Hidecolumns</Name>
                    <Title>HideColumns</Title>
                    <QueryTableName></QueryTableName>
                    <QueryColumnName></QueryColumnName>
                    <CriteriaType>LIST</CriteriaType>
                    <CriteriaDisplay>CHECKBOX</CriteriaDisplay>
                    <ExpandDisplay>NOINPUT</ExpandDisplay>
                    <ReturnColumn></ReturnColumn>
                    <DisplayColumn></DisplayColumn>
                    <OverviewColumn></OverviewColumn>
                    <MatchColumn></MatchColumn>
                    <CriteriaDefaults></CriteriaDefaults>
                    <CriteriaList>Invoice=1,Date=2,SellingPrice=3,BuyingPrice=4,Margin=5</CriteriaList>
                    <Query>
                        <TableSql></TableSql>
                        <WhereSql></WhereSql>
                        <GroupSql></GroupSql>
                        <RowSelection></RowSelection>
                        <SQLRaw></SQLRaw>
                        <SQL>
                            <QuerySql></QuerySql>
                        </SQL>
                        <QueryColumns></QueryColumns>
                        <OrderColumns></OrderColumns>
                        <Assignments></Assignments>
                    </Query>
                    <CriteriaLinks></CriteriaLinks>
                </CriteriaItem>
            </Criteria>
            <Output>
                <PageHeaders></PageHeaders>
                <PageFooters></PageFooters>
                <DisplayOrders>
                    <DisplayOrder>
                        <ColumnName>fk_facture</ColumnName>
                        <OrderNumber>1</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>ref</ColumnName>
                        <OrderNumber>2</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>fecha</ColumnName>
                        <OrderNumber>3</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>nom</ColumnName>
                        <OrderNumber>4</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>total_ht</ColumnName>
                        <OrderNumber>5</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>fk_soc</ColumnName>
                        <OrderNumber>6</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>TotalCompra</ColumnName>
                        <OrderNumber>7</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>TotalVenta</ColumnName>
                        <OrderNumber>8</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>margen</ColumnName>
                        <OrderNumber>9</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>TotalMargen</ColumnName>
                        <OrderNumber>10</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>VentaFormat</ColumnName>
                        <OrderNumber>11</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>CompraFormat</ColumnName>
                        <OrderNumber>12</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>MargenFormat</ColumnName>
                        <OrderNumber>13</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>TotalTotal</ColumnName>
                        <OrderNumber>14</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>rowid</ColumnName>
                        <OrderNumber>15</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>fk_user</ColumnName>
                        <OrderNumber>16</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>name</ColumnName>
                        <OrderNumber>17</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>firstname</ColumnName>
                        <OrderNumber>18</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>TotalCompraComm</ColumnName>
                        <OrderNumber>19</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>TotalVentaComm</ColumnName>
                        <OrderNumber>20</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>TotalMargenComm</ColumnName>
                        <OrderNumber>21</OrderNumber>
                    </DisplayOrder>
                    <DisplayOrder>
                        <ColumnName>buy_price_ht</ColumnName>
                        <OrderNumber>22</OrderNumber>
                    </DisplayOrder>
                </DisplayOrders>
                <Groups>
                    <Group>
                        <GroupName>REPORT_BODY</GroupName>
                        <BeforeGroupHeader>blankline</BeforeGroupHeader>
                        <AfterGroupHeader>blankline</AfterGroupHeader>
                        <BeforeGroupTrailer>blankline</BeforeGroupTrailer>
                        <AfterGroupTrailer>blankline</AfterGroupTrailer>
                        <GroupHeaders></GroupHeaders>
                        <GroupTrailers>
                            <GroupTrailer>
                                <GroupTrailerDisplayColumn>MargenFormat</GroupTrailerDisplayColumn>
                                <GroupTrailerValueColumn>TotalTotal</GroupTrailerValueColumn>
                                <GroupTrailerCustom></GroupTrailerCustom>
                            </GroupTrailer>
                        </GroupTrailers>
                    </Group>
                    <Group>
                        <GroupName>fk_user</GroupName>
                        <BeforeGroupHeader>blankline</BeforeGroupHeader>
                        <AfterGroupHeader>blankline</AfterGroupHeader>
                        <BeforeGroupTrailer>blankline</BeforeGroupTrailer>
                        <AfterGroupTrailer>blankline</AfterGroupTrailer>
                        <GroupHeaders>
                            <GroupHeader>
                                <GroupHeaderColumn>name</GroupHeaderColumn>
                                <GroupHeaderCustom></GroupHeaderCustom>
                            </GroupHeader>
                        </GroupHeaders>
                        <GroupTrailers>
                            <GroupTrailer>
                                <GroupTrailerDisplayColumn>VentaFormat</GroupTrailerDisplayColumn>
                                <GroupTrailerValueColumn>TotalVentaComm</GroupTrailerValueColumn>
                                <GroupTrailerCustom></GroupTrailerCustom>
                            </GroupTrailer>
                            <GroupTrailer>
                                <GroupTrailerDisplayColumn>CompraFormat</GroupTrailerDisplayColumn>
                                <GroupTrailerValueColumn>TotalCompraComm</GroupTrailerValueColumn>
                                <GroupTrailerCustom></GroupTrailerCustom>
                            </GroupTrailer>
                            <GroupTrailer>
                                <GroupTrailerDisplayColumn>MargenFormat</GroupTrailerDisplayColumn>
                                <GroupTrailerValueColumn>TotalMargenComm</GroupTrailerValueColumn>
                                <GroupTrailerCustom></GroupTrailerCustom>
                            </GroupTrailer>
                        </GroupTrailers>
                    </Group>
                    <Group>
                        <GroupName>fk_soc</GroupName>
                        <BeforeGroupHeader>blankline</BeforeGroupHeader>
                        <AfterGroupHeader>blankline</AfterGroupHeader>
                        <BeforeGroupTrailer>blankline</BeforeGroupTrailer>
                        <AfterGroupTrailer>blankline</AfterGroupTrailer>
                        <GroupHeaders>
                            <GroupHeader>
                                <GroupHeaderColumn>nom</GroupHeaderColumn>
                                <GroupHeaderCustom></GroupHeaderCustom>
                            </GroupHeader>
                        </GroupHeaders>
                        <GroupTrailers>
                            <GroupTrailer>
                                <GroupTrailerDisplayColumn>VentaFormat</GroupTrailerDisplayColumn>
                                <GroupTrailerValueColumn>TotalVenta</GroupTrailerValueColumn>
                                <GroupTrailerCustom></GroupTrailerCustom>
                            </GroupTrailer>
                            <GroupTrailer>
                                <GroupTrailerDisplayColumn>CompraFormat</GroupTrailerDisplayColumn>
                                <GroupTrailerValueColumn>TotalCompra</GroupTrailerValueColumn>
                                <GroupTrailerCustom></GroupTrailerCustom>
                            </GroupTrailer>
                            <GroupTrailer>
                                <GroupTrailerDisplayColumn>MargenFormat</GroupTrailerDisplayColumn>
                                <GroupTrailerValueColumn>TotalMargen</GroupTrailerValueColumn>
                                <GroupTrailerCustom></GroupTrailerCustom>
                            </GroupTrailer>
                        </GroupTrailers>
                    </Group>
                </Groups>
                <Graphs></Graphs>
            </Output>
        </EntryForm>
    </ReportQuery>
</Report>